<html><head><base href="https://api.mundodainovacao.com/">
<title>MUNDO DA INOVAÃ‡ÃƒO - Gerenciador de Fluxo de Atendimento</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/react@17.0.2/umd/react.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/babel-standalone@6.26.0/babel.min.js"></script>
<style>
  :root {
    --primary-color: #4a90e2;
    --secondary-color: #50c878;
    --background-color: #f5f7fa;
    --text-color: #333333;
    --border-color: #d1d8e0;
    --error-color: #ff6b6b;
    --warning-color: #ffa502;
    --success-color: #20bf6b;
  }

  body, html {
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
  }

  #app {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }

  .header {
    background-color: var(--primary-color);
    color: white;
    padding: 20px;
    text-align: center;
    border-radius: 8px 8px 0 0;
  }

  .main-content {
    background-color: white;
    border-radius: 0 0 8px 8px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }

  .form-group {
    margin-bottom: 20px;
  }

  label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
  }

  input[type="text"],
  input[type="password"],
  input[type="email"],
  input[type="datetime-local"],
  textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    font-size: 16px;
  }

  button {
    background-color: var(--secondary-color);
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  button:hover {
    background-color: #45b069;
  }

  .dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .dashboard-card {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .dashboard-card h3 {
    margin-top: 0;
    color: var(--primary-color);
  }

  .appointment-list {
    list-style-type: none;
    padding: 0;
  }

  .appointment-list li {
    border-bottom: 1px solid var(--border-color);
    padding: 10px 0;
  }

  .appointment-list li:last-child {
    border-bottom: none;
  }

  .error-message {
    color: var(--error-color);
    background-color: #fff0f0;
    border: 1px solid var(--error-color);
    border-radius: 4px;
    padding: 10px;
    margin-bottom: 20px;
  }

  .success-message {
    color: var(--success-color);
    background-color: #e6fff2;
    border: 1px solid var(--success-color);
    border-radius: 4px;
    padding: 10px;
    margin-bottom: 20px;
  }

  .loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s ease-in-out infinite;
    margin-left: 10px;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .input-error {
    border-color: var(--error-color);
  }

  .error-text {
    color: var(--error-color);
    font-size: 14px;
    margin-top: 5px;
  }
</style>
</head>
<body>
<div id="app"></div>

<script type="text/babel">
const { useState, useEffect } = React;

function App() {
  const [appointments, setAppointments] = useState([]);

  useEffect(() => {
    fetchAppointments();
  }, []);

  const fetchAppointments = async () => {
    try {
      const response = await axios.get('/api/appointments');
      setAppointments(response.data);
    } catch (error) {
      console.error('Error fetching appointments:', error);
    }
  };

  return (
    <div>
      <header className="header">
        <h1>MUNDO DA INOVAÃ‡ÃƒO - Gerenciador de Fluxo de Atendimento</h1>
      </header>
      <main className="main-content">
        <Dashboard appointments={appointments} setAppointments={setAppointments} />
      </main>
    </div>
  );
}

function Dashboard({ appointments, setAppointments }) {
  return (
    <div className="dashboard">
      <div className="dashboard-card">
        <h3>Agendamentos Recentes</h3>
        <ul className="appointment-list">
          {appointments.map((appointment, index) => (
            <li key={index}>
              {appointment.clientName} - {new Date(appointment.date).toLocaleString()}
            </li>
          ))}
        </ul>
      </div>
      <div className="dashboard-card">
        <h3>Novo Agendamento</h3>
        <NewAppointmentForm setAppointments={setAppointments} />
      </div>
    </div>
  );
}

function NewAppointmentForm({ setAppointments }) {
  const [clientName, setClientName] = useState('');
  const [clientPhone, setClientPhone] = useState('');
  const [date, setDate] = useState('');
  const [error, setError] = useState('');
  const [success, setSuccess] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [validationErrors, setValidationErrors] = useState({});

  const validateForm = () => {
    const errors = {};
    if (clientName.length < 3) {
      errors.clientName = 'O nome do cliente deve ter pelo menos 3 caracteres';
    }
    if (!/^\d{10,11}$/.test(clientPhone)) {
      errors.clientPhone = 'O telefone deve conter 10 ou 11 dÃ­gitos numÃ©ricos';
    }
    if (!date) {
      errors.date = 'A data e hora sÃ£o obrigatÃ³rias';
    } else {
      const selectedDate = new Date(date);
      const now = new Date();
      if (selectedDate <= now) {
        errors.date = 'A data e hora devem ser futuras';
      }
    }
    setValidationErrors(errors);
    return Object.keys(errors).length === 0;
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    setSuccess('');
    if (!validateForm()) {
      setError('Por favor, corrija os erros no formulÃ¡rio antes de enviar.');
      return;
    }
    setIsLoading(true);
    try {
      const response = await axios.post('/api/appointments', 
        { clientName, clientPhone, date }
      );
      setSuccess('Agendamento criado com sucesso!');
      setClientName('');
      setClientPhone('');
      setDate('');
      setAppointments(prevAppointments => [...prevAppointments, response.data]);
    } catch (error) {
      console.error('Error creating appointment:', error);
      setError('Erro ao criar agendamento. Por favor, verifique os dados e tente novamente.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      {error && <div className="error-message">{error}</div>}
      {success && <div className="success-message">{success}</div>}
      <div className="form-group">
        <label htmlFor="clientName">Nome do Cliente:</label>
        <input
          type="text"
          id="clientName"
          value={clientName}
          onChange={(e) => setClientName(e.target.value)}
          className={validationErrors.clientName ? 'input-error' : ''}
          required
        />
        {validationErrors.clientName && <div className="error-text">{validationErrors.clientName}</div>}
      </div>
      <div className="form-group">
        <label htmlFor="clientPhone">Telefone do Cliente:</label>
        <input
          type="text"
          id="clientPhone"
          value={clientPhone}
          onChange={(e) => setClientPhone(e.target.value)}
          className={validationErrors.clientPhone ? 'input-error' : ''}
          required
        />
        {validationErrors.clientPhone && <div className="error-text">{validationErrors.clientPhone}</div>}
      </div>
      <div className="form-group">
        <label htmlFor="date">Data e Hora:</label>
        <input
          type="datetime-local"
          id="date"
          value={date}
          onChange={(e) => setDate(e.target.value)}
          className={validationErrors.date ? 'input-error' : ''}
          required
        />
        {validationErrors.date && <div className="error-text">{validationErrors.date}</div>}
      </div>
      <button type="submit" disabled={isLoading}>
        {isLoading ? 'Criando...' : 'Criar Agendamento'}
        {isLoading && <div className="loading"></div>}
      </button>
    </form>
  );
}

ReactDOM.render(<App />, document.getElementById('app'));
</script>
</body></html>
